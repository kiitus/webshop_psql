(this.webpackJsonpwebstore=this.webpackJsonpwebstore||[]).push([[0],{35:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(1),s=c.n(r),d=c(28),i=c.n(d),j=(c(35),c(14)),o=c(4),a=function(e){var t=e.onClick,c=Object(r.useState)(""),s=Object(o.a)(c,2),d=s[0],i=s[1],j=Object(r.useState)(1),a=Object(o.a)(j,2),l=a[0],b=a[1];return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Add product for sale"}),"'",Object(n.jsxs)("form",{className:"form-inline",children:[Object(n.jsxs)("div",{className:"form-group mb-2",children:["Product:",Object(n.jsx)("input",{type:"text",value:d,onChange:function(e){var t=e.target;return i(t.value)}})]}),Object(n.jsxs)("div",{className:"form-group mx-sm-3 mb-2",children:["Price:  ",Object(n.jsx)("input",{type:"number",value:l,min:"0",max:"1000",step:"0.01",onChange:function(e){var t=e.target;return b(t.value)}}),"\u20ac"]}),Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),d.length>0&&(t(d,l),i(""),b(1))},children:"Add product"})]})]})},l=function(){return Object(n.jsx)("header",{className:"p-3",children:Object(n.jsx)("h2",{children:"Web shop application from Teemu "})})},b=c(11),u=c(10),h=function(e){var t=e.item,c=e.deleteItem,s=e.addToOrder,d=Object(r.useState)(0),i=Object(o.a)(d,2),j=i[0],a=i[1],l="/Product/".concat(t.id);return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t.text}),Object(n.jsxs)("td",{children:[t.price,"\u20ac"]}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{type:"number",value:j,min:"0",max:"20",step:"1",onChange:function(e){var t=e.target;return a(t.value)}})}),Object(n.jsx)("td",{onClick:function(){s(t.id,t.text,t.price,j),a(0)},children:j>0?Object(n.jsxs)(n.Fragment,{children:[" Order ",Object(n.jsx)(b.a,{style:{color:"green"}})]}):Object(n.jsx)(n.Fragment,{})}),Object(n.jsxs)("td",{onClick:function(){return c(t.id)},children:["Remove",Object(n.jsx)(b.a,{style:{color:"red"}})]}),Object(n.jsxs)("td",{children:[Object(n.jsx)(u.b,{to:l,children:"Detail"})," "]})]})},O=function(e){var t=e.items,c=e.deleteItem,r=e.addToOrder;return Object(n.jsx)("div",{className:"pt-5",children:t.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Products on sale "}),Object(n.jsx)("div",{children:Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",children:"Product"}),Object(n.jsx)("th",{scope:"col",children:"Price"}),Object(n.jsx)("th",{scope:"col",children:"Amount"}),Object(n.jsx)("th",{scope:"col",children:"Order"}),Object(n.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(n.jsx)("tbody",{children:t.map((function(e){return Object(n.jsx)(h,{item:e,deleteItem:c,addToOrder:r},e.id)}))})]})})]}):Object(n.jsx)(n.Fragment,{})})},x=function(e){var t=e.item;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t.text}),Object(n.jsx)("td",{children:t.price}),Object(n.jsx)("td",{children:t.amount}),Object(n.jsx)("td",{children:(t.price*t.amount).toFixed(2)})]})},m=function(e){var t=e.order,c=e.deleteOrder,r=t.OrderItems.reduce((function(e,t){return e+t.price*t.amount}),0);return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{children:[Object(n.jsxs)("h4",{className:"pt-3",children:[Object(n.jsxs)("span",{className:"p-3",children:["Name: ",t.name]})," OrderID: ",t.number," ",Object(n.jsx)(b.a,{style:{color:"red"},onClick:function(){return c(t.id)}})]}),Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Product"}),Object(n.jsx)("th",{children:"Price"}),Object(n.jsx)("th",{children:"Amount"}),Object(n.jsx)("th",{children:"Total Price"})]})}),Object(n.jsxs)("tbody",{children:[t.OrderItems.map((function(e){return console.log({one:e}),Object(n.jsx)(x,{item:e},e.id)})),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{}),Object(n.jsx)("td",{}),Object(n.jsx)("td",{}),Object(n.jsx)("td",{children:Object(n.jsxs)("b",{children:[" ",r.toFixed(2)]})})]})]})]})]})})},p=function(e){var t=e.orders,c=e.deleteOrder;return Object(n.jsx)("div",{children:t.map((function(e){return Object(n.jsx)(m,{order:e,deleteOrder:c},e.id)}))})},f=function(e){var t=e.item,c=e.deleteItem;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t.text}),Object(n.jsx)("td",{children:t.price}),Object(n.jsx)("td",{children:t.amount}),Object(n.jsx)("td",{children:(t.price*t.amount).toFixed(2)}),Object(n.jsxs)("td",{onClick:function(){return c(t.id)},children:["Remove",Object(n.jsx)(b.a,{style:{color:"red"}})]})]})},v=function(e){var t=e.order,c=e.onClick,s=e.deleteItem,d=Object(r.useState)(""),i=Object(o.a)(d,2),j=i[0],a=i[1],l=t.reduce((function(e,t){return e+t.price*t.amount}),0);return Object(n.jsxs)("div",{className:"pt-3",children:[Object(n.jsx)("h2",{children:"Current order"}),Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Producet"}),Object(n.jsx)("th",{children:"Price"}),Object(n.jsx)("th",{children:"Amount"}),Object(n.jsx)("th",{children:"Total price"})]})}),Object(n.jsxs)("tbody",{children:[t.map((function(e){return Object(n.jsx)(f,{item:e,deleteItem:s},e.id)})),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{}),Object(n.jsx)("td",{}),Object(n.jsx)("td",{}),Object(n.jsx)("td",{children:Object(n.jsx)("b",{children:l.toFixed(2)})})]})]})]}),"Name of the orderer ",Object(n.jsx)("input",{type:"text",value:j,onChange:function(e){var t=e.target;return a(t.value)}}),Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(){return c(j,t)},children:"Send order"})]})},g=function(e){var t=e.text;return Object(n.jsx)("div",{children:Object(n.jsx)("h3",{className:"pt-3",children:t})})},N=c(2),k=c(9),C=c.n(k),y=function(){var e=Object(r.useState)({}),t=Object(o.a)(e,2),c=t[0],s=t[1],d=Object(N.f)().id;return Object(r.useEffect)((function(){C.a.get("".concat("/productBack/","/id/").concat(d)).then((function(e){s(e.data)}))}),[d]),""===c?Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{className:"pt-2",children:"Item not found"}),Object(n.jsx)(u.b,{to:"/",children:"Back to product page"})]}):Object(n.jsxs)("div",{className:"pt-3",children:["This site gives more details about product: ",Object(n.jsxs)("b",{children:[c.text," "]})," which costs ",c.price,"\u20ac",Object(n.jsx)("div",{className:"pt3",children:Object(n.jsx)(u.b,{to:"/",children:"Back to product page"})})]})},I=function(e){var t=e.text;return Object(n.jsxs)("div",{style:{backgroundColor:"#333",color:"white",display:"block",overflow:"hidden",padding:"24px",marginTop:"10px",bottom:"0",width:"100"},children:[Object(n.jsx)("p",{children:t}),Object(n.jsxs)("p",{children:["Github can be found ",Object(n.jsx)("a",{href:"https://github.com/kiitus/webshop_psql",children:"HERE"})]})]})},P=function(e){var t=e.message;return null===t?null:Object(n.jsx)("div",{style:{color:"green",marginTop:20,marginBottom:20,border:"solid",padding:10},children:t})},S=function(e){e.products;var t=e.filter,c=Object(r.useState)(""),s=Object(o.a)(c,2),d=s[0],i=s[1];return Object(n.jsxs)("div",{className:"pt-5",children:["Search products on sale   ",Object(n.jsx)("input",{value:d,onChange:function(e){var t=e.target;return i(t.value)}})," ",Object(n.jsx)("button",{value:"submit",onClick:function(){t(d)},children:"Search"})]})};var T=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],d=Object(r.useState)([]),i=Object(o.a)(d,2),b=i[0],h=i[1],x=Object(r.useState)([]),m=Object(o.a)(x,2),f=m[0],k=m[1],T=Object(r.useState)(null),w=Object(o.a)(T,2),F=w[0],B=w[1],A="/productBack/",E="/orderBack/";return Object(r.useEffect)((function(){C.a.get(A).then((function(e){console.log(e.data),s(e.data)}))}),[]),Object(r.useEffect)((function(){C.a.get(E).then((function(e){console.log(e.data),k(e.data)}))}),[]),Object(n.jsxs)("div",{className:"container",style:{position:"relative",minHeight:"92vh"},children:[Object(n.jsxs)("div",{style:{paddingBottom:"2.5rem"},children:[Object(n.jsx)(l,{}),Object(n.jsxs)(u.a,{children:[Object(n.jsx)(u.b,{to:"/",className:"p-2",children:"Products"}),Object(n.jsx)(u.b,{to:"/order",className:"p-2",children:"Order"}),Object(n.jsx)(u.b,{to:"/sended_orders",className:"p-2",children:"Sended orders"}),Object(n.jsx)(P,{message:F}),Object(n.jsxs)(N.c,{children:[Object(n.jsxs)(N.a,{exact:!0,path:"/",children:[Object(n.jsx)(S,{products:c,filter:function(e){0===e.length?C.a.get(A).then((function(e){console.log(e.data),s(e.data)})):C.a.get("".concat(A,"/").concat(e)).then((function(e){console.log(e.data),s(e.data)}))}}),Object(n.jsx)(O,{items:c,deleteItem:function(e){C.a.delete(A+"".concat(e)).then((function(t){s(c.filter((function(t){return t.id!==e})))}))},addToOrder:function(e,t,n,r){var d=b.some((function(t){return t.id===e}));r=parseInt(r),d?(h(b.map((function(t){return t.id!==e?t:Object(j.a)(Object(j.a)({},t),{},{amount:r})}))),B("Product: ".concat(t," amount was updated to ").concat(r))):(h(b.concat({id:e,text:t,price:n,amount:r})),B("Product: ".concat(t," Amount: ").concat(r," was added to order"))),setTimeout((function(){B(null)}),3e3),s(c.map((function(t){return t.id===e?Object(j.a)(Object(j.a)({},t),{},{amount:0}):t})))}}),Object(n.jsx)(a,{onClick:function(e,t){var n={text:e,price:t};C.a.post(A,n).then((function(e){var t=e.data,n=t.id,r=t.text,d=t.price;s(c.concat({id:n,text:r,price:d,amount:0}))})).catch((function(e){console.log("axios error ".concat(e))}))}})]}),Object(n.jsx)(N.a,{path:"/order",children:b.length>0?Object(n.jsx)(v,{order:b,onClick:function(e,t){var c={name:e,number:Math.floor(1e4*Math.random()),OrderItems:t};C.a.post(E,c).then((function(e){c.id=e.data[0].OrderId;for(var t=0;t<e.data.length;t++)c.OrderItems[t].id=e.data[t].id;k(f.concat(c)),h([])}))},deleteItem:function(e){h(b.filter((function(t){return t.id!==e})))}}):Object(n.jsx)(g,{text:"Current order is empty"})}),Object(n.jsx)(N.a,{path:"/sended_orders",children:f.length>0?Object(n.jsx)(p,{orders:f,deleteOrder:function(e){C.a.delete("".concat(E,"/").concat(e)).then((function(){k(f.filter((function(t){return t.id!==e})))}))}}):Object(n.jsx)(g,{text:"There are no orders made"})}),Object(n.jsx)(N.a,{path:"/Product/:id",children:Object(n.jsx)(y,{products:c})}),Object(n.jsx)(N.a,{path:"/",children:Object(n.jsx)(g,{text:"Error in site adress"})})]})]})]}),Object(n.jsx)("div",{style:{position:"absolute",bottom:"0",width:"100%",height:"2.5rem"},children:Object(n.jsx)(I,{text:"This site is made using React,Axios, Node.js(express), Sequelize and PostgreSQL."})})]})},w=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,60)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,d=t.getTTFB;c(e),n(e),r(e),s(e),d(e)}))};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(T,{})}),document.getElementById("root")),w()}},[[59,1,2]]]);
//# sourceMappingURL=main.3a4145a5.chunk.js.map